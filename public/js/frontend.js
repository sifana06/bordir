var autoComplete=function(){return function(e){if(document.querySelector){var t={selector:0,source:0,minChars:3,delay:150,offsetLeft:0,offsetTop:1,cache:1,menuClass:"",renderItem:function(e,t){t=t.replace(/[-\/\\^$*+?.()|[\]{}]/g,"\\$&");var n=new RegExp("("+t.split(" ").join("|")+")","gi");return'<div class="autocomplete-suggestion" data-val="'+e+'">'+e.replace(n,"<b>$1</b>")+"</div>"},onSelect:function(e,t,n){}};for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n]);for(var o="object"==typeof t.selector?[t.selector]:document.querySelectorAll(t.selector),a=0;a<o.length;a++){var s=o[a];s.sc=document.createElement("div"),s.sc.className="autocomplete-suggestions "+t.menuClass,s.autocompleteAttr=s.getAttribute("autocomplete"),s.setAttribute("autocomplete","off"),s.cache={},s.last_val="",s.updateSC=function(e,n){var o=s.getBoundingClientRect();if(s.sc.style.left=Math.round(o.left+(window.pageXOffset||document.documentElement.scrollLeft)+t.offsetLeft)+"px",s.sc.style.top=Math.round(o.bottom+(window.pageYOffset||document.documentElement.scrollTop)+t.offsetTop)+"px",s.sc.style.width=Math.round(o.right-o.left)+"px",!e&&(s.sc.style.display="block",s.sc.maxHeight||(s.sc.maxHeight=parseInt((window.getComputedStyle?getComputedStyle(s.sc,null):s.sc.currentStyle).maxHeight)),s.sc.suggestionHeight||(s.sc.suggestionHeight=s.sc.querySelector(".autocomplete-suggestion").offsetHeight),s.sc.suggestionHeight))if(n){var a=s.sc.scrollTop,c=n.getBoundingClientRect().top-s.sc.getBoundingClientRect().top;c+s.sc.suggestionHeight-s.sc.maxHeight>0?s.sc.scrollTop=c+s.sc.suggestionHeight+a-s.sc.maxHeight:c<0&&(s.sc.scrollTop=c+a)}else s.sc.scrollTop=0},r(window,"resize",s.updateSC),document.body.appendChild(s.sc),u("autocomplete-suggestion","mouseleave",function(e){var t=s.sc.querySelector(".autocomplete-suggestion.selected");t&&setTimeout(function(){t.className=t.className.replace("selected","")},20)},s.sc),u("autocomplete-suggestion","mouseover",function(e){var t=s.sc.querySelector(".autocomplete-suggestion.selected");t&&(t.className=t.className.replace("selected","")),this.className+=" selected"},s.sc),u("autocomplete-suggestion","mousedown",function(e){if(i(this,"autocomplete-suggestion")){var n=this.getAttribute("data-val");s.value=n,t.onSelect(e,n,this),s.sc.style.display="none"}},s.sc),s.blurHandler=function(){try{var e=document.querySelector(".autocomplete-suggestions:hover")}catch(t){e=0}e?s!==document.activeElement&&setTimeout(function(){s.focus()},20):(s.last_val=s.value,s.sc.style.display="none",setTimeout(function(){s.sc.style.display="none"},350))},r(s,"blur",s.blurHandler);var c=function(e){var n=s.value;if(s.cache[n]=e,e.length&&n.length>=t.minChars){for(var o="",a=0;a<e.length;a++)o+=t.renderItem(e[a],n);s.sc.innerHTML=o,s.updateSC(0)}else s.sc.style.display="none"};s.keydownHandler=function(e){var n,o=window.event?e.keyCode:e.which;if((40==o||38==o)&&s.sc.innerHTML)return(a=s.sc.querySelector(".autocomplete-suggestion.selected"))?(n=40==o?a.nextSibling:a.previousSibling)?(a.className=a.className.replace("selected",""),n.className+=" selected",s.value=n.getAttribute("data-val")):(a.className=a.className.replace("selected",""),s.value=s.last_val,n=0):((n=40==o?s.sc.querySelector(".autocomplete-suggestion"):s.sc.childNodes[s.sc.childNodes.length-1]).className+=" selected",s.value=n.getAttribute("data-val")),s.updateSC(0,n),!1;if(27==o)s.value=s.last_val,s.sc.style.display="none";else if(13==o||9==o){var a;(a=s.sc.querySelector(".autocomplete-suggestion.selected"))&&"none"!=s.sc.style.display&&(t.onSelect(e,a.getAttribute("data-val"),a),setTimeout(function(){s.sc.style.display="none"},20))}},r(s,"keydown",s.keydownHandler),s.keyupHandler=function(e){var n=window.event?e.keyCode:e.which;if(!n||(n<35||n>40)&&13!=n&&27!=n){var o=s.value;if(o.length>=t.minChars){if(o!=s.last_val){if(s.last_val=o,clearTimeout(s.timer),t.cache){if(o in s.cache)return void c(s.cache[o]);for(var a=1;a<o.length-t.minChars;a++){var i=o.slice(0,o.length-a);if(i in s.cache&&!s.cache[i].length)return void c([])}}s.timer=setTimeout(function(){t.source(o,c)},t.delay)}}else s.last_val=o,s.sc.style.display="none"}},r(s,"keyup",s.keyupHandler),s.focusHandler=function(e){s.last_val="\n",s.keyupHandler(e)},t.minChars||r(s,"focus",s.focusHandler)}this.destroy=function(){for(var e=0;e<o.length;e++){var t=o[e];l(window,"resize",t.updateSC),l(t,"blur",t.blurHandler),l(t,"focus",t.focusHandler),l(t,"keydown",t.keydownHandler),l(t,"keyup",t.keyupHandler),t.autocompleteAttr?t.setAttribute("autocomplete",t.autocompleteAttr):t.removeAttribute("autocomplete"),document.body.removeChild(t.sc),t=null}}}function i(e,t){return e.classList?e.classList.contains(t):new RegExp("\\b"+t+"\\b").test(e.className)}function r(e,t,n){e.attachEvent?e.attachEvent("on"+t,n):e.addEventListener(t,n)}function l(e,t,n){e.detachEvent?e.detachEvent("on"+t,n):e.removeEventListener(t,n)}function u(e,t,n,o){r(o||document,t,function(t){for(var o,a=t.target||t.srcElement;a&&!(o=i(a,e));)a=a.parentElement;o&&n.call(a,t)})}}}();"function"==typeof define&&define.amd?define("autoComplete",function(){return autoComplete}):"undefined"!=typeof module&&module.exports?module.exports=autoComplete:window.autoComplete=autoComplete;let _token=document.head.querySelector('meta[name="csrf-token"]').getAttribute("content"),res_shipping_id=0,cart=document.getElementsByClassName("cart-item")[0],elShippingCost=document.getElementById("shipping-cost"),elAmountTotal=document.getElementById("amount-total"),elShippingId=document.getElementById("shipping_id"),elCourier=document.getElementById("courier"),elFormShippingCost=document.getElementById("shipping_cost"),elFormDiscount=document.getElementById("discount_");const FloatLabel=(()=>{const e=e=>{const t=e.target;t.parentNode.classList.add("active"),t.setAttribute("placeholder",t.getAttribute("data-placeholder"))},t=e=>{const t=e.target;t.value||t.parentNode.classList.remove("active"),t.removeAttribute("placeholder")};return{init:()=>{document.querySelectorAll(".form-group").forEach(n=>{n.querySelector("input,textarea,select").value&&n.classList.add("active"),(n=>{const o=n.querySelector("input,textarea,select");o.addEventListener("focus",e),o.addEventListener("blur",t)})(n)})}}})();FloatLabel.init();const selectCity={init:()=>{let e=window.XMLHttpRequest?new XMLHttpRequest:new ActiveXObject("Microsoft.XMLHTTP");new autoComplete({selector:'input[name="destination"]',minChars:4,source:function(t,n){try{e.abort()}catch(e){}e.open("GET","/api/get-cities/?q="+t.trim()),e.setRequestHeader("X-Requested-With","XMLHttpRequest"),e.setRequestHeader("X-CSRF-TOKEN",_token),e.onload=function(){if(200===e.status){let t=JSON.parse(e.responseText);n(t)}},e.send()},renderItem:function(e,t){t=t.replace(/[-\/\\^$*+?.()|[\]{}]/g,"\\$&");var n=new RegExp("("+t.split(" ").join("|")+")","gi");return'<div class="autocomplete-suggestion" data-district="'+e.subdistrict_name+'" data-id="'+e.subdistrict_id+'" data-val="'+e.name+'">'+e.name.replace(n,"<b>$1</b>")+"</div>"},onSelect:function(e,t,n){e.preventDefault(),elShippingCost.innerHTML="Loading...",res_shipping_id=n.getAttribute("data-id"),checkOngkir()}})}};function convertToRupiah(e){for(var t="",n=e.toString().split("").reverse().join(""),o=0;o<n.length;o++)o%3==0&&(t+=n.substr(o,3)+".");return"Rp "+t.split("",t.length-1).reverse().join("")+",00"}function convertToAngka(e){return parseInt(e.replace(/,.*|[^0-9]/g,""),10)}function changeQty(e){let t=cart.getAttribute("data-price");subTotal=document.getElementById("sub-total"),discount=document.getElementById("discount"),document.getElementById("item-qty").innerHTML=e.value,subTotal.innerHTML=convertToRupiah(t*e.value),elAmountTotal.innerHTML=convertToRupiah(t*e.value-convertToAngka(discount.innerHTML)),elFormDiscount.value=convertToAngka(discount.innerHTML),res_shipping_id>0&&checkOngkir()}function checkOngkir(){let e=localStorage.getItem("city"),t=localStorage.getItem("district"),n=window.XMLHttpRequest?new XMLHttpRequest:new ActiveXObject("Microsoft.XMLHTTP"),o=cart.getAttribute("data-weight");var a=document.getElementById("sub-total");prodQty=document.getElementById("qty").value,productPrice=cart.getAttribute("data-price"),discount=document.getElementById("discount"),$.LoadingOverlay("show"),n.open("POST",`/api/get-cost/?destination_id=${res_shipping_id}&weight=${o*prodQty}&city_text=${e}&district_text=${t}`),n.setRequestHeader("Content-Type","application/x-www-form-urlencoded"),n.setRequestHeader("X-CSRF-TOKEN",_token),n.onload=function(){if(200===n.status){$.LoadingOverlay("hide");let e=JSON.parse(n.responseText),t=0,o=0;"cod"==e.shipping_type&&(t=e.data[0].costs[0].cost[0].value,o=parseInt(t)+convertToAngka(a.innerHTML)-convertToAngka(discount.innerHTML),elCourier.value=e.courier),elShippingCost.innerHTML=convertToRupiah(t),elAmountTotal.innerHTML=convertToRupiah(o),elFormShippingCost.value=t,elShippingId.value=res_shipping_id,elFormDiscount=convertToAngka(discount.innerHTML)}},n.send()}function calculateSubTotal(){var e=$(".cart-item").attr("data-price"),t=($(".cart-item").attr("data-weight"),$("#shipping_cost").val()),n=(t=parseInt(t)||"",$("#qty").val()),o=n?n*e:e,a=o+t;$("#sub-total").html(convertToRupiah(o)),$("#amount-total").html(convertToRupiah(a))}selectCity.init(),$.ajaxSetup({headers:{"X-CSRF-TOKEN":$('meta[name="csrf-token"]').attr("content")}}),$(document).on("change",".selection-variant",function(){var e="";let t=Object.keys(products).length,n=products[0].name.split("[space]").length;var o=[];$(".selection-variant option:selected").each(function(t,n){e+=$(this).val()+"|",""!=$(this).val()&&$(this).length});for(var a=0;a<t;a++){let t=e.split("|"),s=products[a].name.split("[space]")[1],c=products[a].name.split("[space]")[3],i=products[a].name.split("[space]")[5],r=products[a].name.split("[space]")[7],l=products[a].name.split("[space]")[9],u=products[a].name.split("[space]")[11];varian_6=products[a].name.split("[space]")[13],varian_7=products[a].name.split("[space]")[15],varian_8=products[a].name.split("[space]")[17],varian_9=products[a].name.split("[space]")[19],2==n?s==t[0]&&(o=products[a]):4==n?s==t[0]&&c==t[1]&&(o=products[a]):6==n?s==t[0]&&c==t[1]&&i==t[2]&&(o=products[a]):8==n?s==t[0]&&c==t[1]&&i==t[2]&&r==t[3]&&(o=products[a]):10==n?s==t[0]&&c==t[1]&&i==t[2]&&r==t[3]&&l==t[4]&&(o=products[a]):12==n?s==t[0]&&c==t[1]&&i==t[2]&&r==t[3]&&l==t[4]&&u==t[5]&&(o=products[a]):14==n?s==t[0]&&c==t[1]&&i==t[2]&&r==t[3]&&l==t[4]&&u==t[5]&&varian_6==t[6]&&(o=products[a]):16==n?s==t[0]&&c==t[1]&&i==t[2]&&r==t[3]&&l==t[4]&&u==t[5]&&varian_6==t[6]&&varian_7==t[7]&&(o=products[a]):18==n?s==t[0]&&c==t[1]&&i==t[2]&&r==t[3]&&l==t[4]&&u==t[5]&&varian_6==t[6]&&varian_7==t[7]&&varian_8==t[8]&&(o=products[a]):20==n&&s==t[0]&&c==t[1]&&i==t[2]&&r==t[3]&&l==t[4]&&u==t[5]&&varian_6==t[6]&&varian_7==t[7]&&varian_8==t[8]&&varian_9==t[9]&&(o=products[a])}$(".cart-item").attr("data-price",o.price),$(".cart-item").attr("data-weight",o.weight),$("#product_id").val(o.id),$(".price").html(convertToRupiah(o.price?o.price:0)),calculateSubTotal()}),window.onload=function(){var e=new Date;e.setTime(36e5*Math.round(e/36e5)+36e5),function(e){var t=0,n=document.querySelector(".info-time-wrap"),o=document.querySelector("#info_time .hours"),a=document.querySelector("#info_time .minutes"),s=document.querySelector("#info_time .seconds"),c=document.querySelector("#info_time .ms");if(!o)return;var i=function(){if(!(e<0)&&(--t<0&&(t=9),c.innerHTML=t,9===t)){--e;var i=Math.floor(e/3600),l=e-3600*i,u=Math.floor(l/60);second=l-60*u,i<10&&(i="0"+i),u<10&&(u="0"+u),second<10&&(second="0"+second),o.innerHTML=i,a.innerHTML=u,s.innerHTML=second,0==e&&(n.innerHTML="å·²ç»“æŸ",clearInterval(r))}};i();var r=setInterval(i,100)}(parseInt((e-new Date)/1e3))};
